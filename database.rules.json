{
  "rules": {
    "memberRoles": {
      "$uid": {
        ".read": "((auth !== null) && (root.child('memberRoles').child(auth.uid).child('zedeck').exists())) || ((auth !== null) && (auth.uid === $uid))",
        "$role": {
          ".validate": "newData.isBoolean() && ($role === 'clerk' || $role === 'church_elder' || $role === 'elder' || $role === 'department_director' || $role === 'department_secretary' || $role === 'department_assistant')",
          ".write": "((auth !== null) && (root.child('memberRoles').child(auth.uid).child('zedeck').exists()))"
        }
      }
    },
    "members": {
      ".read": "((auth !== null) && (root.child('members').child(auth.uid).exists()))",
      "$uid": {
        ".write": "((auth !== null) && (auth.uid === $uid)) || ((auth !== null) && (root.child('memberRoles').child(auth.uid).child('clerk').exists() || root.child('memberRoles').child(auth.uid).child('zedeck').exists()))"
      }
    },
    "prayers": {
      ".read": "((auth !== null) && (root.child('members').child(auth.uid).exists()))",
      "$prayer_id": {
        ".validate": "(newData.hasChildren(['content', 'anonymous', 'createdAt']) && ((newData.hasChild('poster') && (auth !== null) && newData.child('poster').isString() && newData.child('poster').val() === auth.uid) || !newData.hasChild('poster')) && (newData.child('content').isString() && newData.child('content').val().length >= 7 && newData.child('content').val().length <= 4096) && (newData.child('anonymous').isBoolean()) && (newData.child('createdAt').isNumber())) && (((newData.child('anonymous').val() === false) && (newData.child('poster').exists())) || (newData.child('anonymous').val() === true))",
        ".write": "((newData.exists() && !data.exists() && ((auth !== null) && (root.child('members').child(auth.uid).exists())) && ((auth !== null) && auth.uid === newData.child('poster').val())) || (newData.exists() && data.exists() && ((auth !== null) && auth.uid === data.child('poster').val()) || ((auth !== null) && (root.child('memberRoles').child(auth.uid).child('clerk').exists() || root.child('memberRoles').child(auth.uid).child('zedeck').exists()))) || (!newData.exists() && data.exists() && ((auth !== null) && auth.uid === data.child('poster').val()) || ((auth !== null) && (root.child('memberRoles').child(auth.uid).child('clerk').exists() || root.child('memberRoles').child(auth.uid).child('zedeck').exists()))))"
      }
    },
    "prayerViews": {
      ".read": "((auth !== null) && (root.child('members').child(auth.uid).exists()))",
      "$prayer_id": {
        ".validate": "newData.isNumber()",
        ".write": "((newData.exists() && !data.exists() && ((auth !== null) && (root.child('members').child(auth.uid).exists())) && newData.val() === 1) || (newData.exists() && data.exists() && ((auth !== null) && (root.child('members').child(auth.uid).exists())) && data.val() + 1 === newData.val()) || (!newData.exists() && data.exists() && false))"
      }
    },
    "prayerComments": {
      ".read": "((auth !== null) && (root.child('members').child(auth.uid).exists()))",
      "$prayer_id": {
        ".validate": "(newData.hasChildren(['prayerId', 'content', 'createdBy', 'createdAt']) && (newData.child('prayerId').isString() && newData.child('prayerId').val().length === 20) && (newData.child('content').isString() && newData.child('content').val().length >= 3 && newData.child('content').val().length <= 4096) && ((auth !== null) && newData.child('createdBy').isString() && newData.child('createdBy').val().length === 28) && (newData.child('createdAt').isNumber()))",
        ".write": "((newData.exists() && !data.exists() && ((auth !== null) && (root.child('members').child(auth.uid).exists())) && ((auth !== null) && auth.uid === newData.child('createdBy').val())) || (newData.exists() && data.exists() && false) || (!newData.exists() && data.exists() && ((auth !== null) && (root.child('members').child(auth.uid).exists())) || ((auth !== null) && auth.uid === data.child('createdBy').val()) || ((auth !== null) && (root.child('memberRoles').child(auth.uid).child('clerk').exists() || root.child('memberRoles').child(auth.uid).child('zedeck').exists()))))"
      }
    },
    "membersPrayingForPrayerRequests": {
      "$prayer_id": {
        ".read": "((auth !== null) && (root.child('members').child(auth.uid).exists()))",
        "$uid": {
          ".validate": "newData.isBoolean()",
          ".write": "((auth !== null) && (root.child('members').child(auth.uid).exists())) && root.child('prayers').child($prayer_id).exists() && ((auth !== null) && (auth.uid === $uid))"
        }
      }
    }
  }
}